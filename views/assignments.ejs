<!DOCTYPE HTML>
<!--
	Typify by TEMPLATED
	templated.co @templatedco
	Released for free under the Creative Commons Attribution 3.0 license (templated.co/license)
-->
<html>

<head>
	<title>codePannu - Free Python online course for school students</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
	<link rel="stylesheet" href="assets/css/main.css" />
	<!-- <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet"> -->
	<!--[if lte IE 9]><link rel="stylesheet" href="assets/css/ie9.css" /><![endif]-->
</head>

<body>

    <!-- #header -->
    <header id="header" class="header header-hide">
        <div class="container">
            <div id="logo" class="pull-left">
                <h1><a href="/" class="scrollto"><span>codePannu</span></a></h1>
            </div>
            <div style="float:right; padding:5px; font-size:30px">
                <a href="/"><i class="fa fa-home"></i></a></div>
        </div>
    </header><!-- #header -->




	<!-- Quote -->
	<section id="banner-quote">
		<p>Easy and Fun coding for school students</p>
	</section>


	<section id="two" class="wrapper style2 special">
		<div class="inner narrow">
			<header>
				<h2>Assignment</h2>
			</header>
			<form class="grid-form" id='assignment-details'>
				<div class="form-control narrow">
					<!-- <label for="name">Name</label> -->
					<input name="name" id="name" type="text" placeholder='Your Name'>
				</div>
				<div class="form-control narrow">
					<!-- <label for="email">Email</label> -->
					<input name="email" id="email" type="email" placeholder='Your Email'>
				</div>
				<div class="form-control narrow">
					<div class="select-wrapper">
						<select name="level" id="level">
							<option value="">- Select Python Level -</option>
							<option value="1">Level One</option>
							<option value="2">Level Two</option>
						</select>
					</div>
				</div>
				<div class="form-control narrow">
					<div class="select-wrapper">
						<select name="day" id="day">
							<option value="">- Select Day -</option>
							<option value="1">Day 1</option>
							<option value="2">Day 2</option>
							<option value="3">Day 3</option>
							<option value="4">Day 4</option>
							<option value="5">Day 5</option>
							<option value="6">Day 6</option>
							<option value="7">Day 7</option>
						</select>
					</div>
				</div>


				<div class="form-control">
					<h4>Paste your Code for exercise 1</h4>
					<!-- <label for='answer1'>Paste your code for exercise 1</label><br> -->
					<textarea name="answer1" id="answer1" rows="4"></textarea>
				</div>
				<!-- <div class="form-control">
					<h4>Paste your Code for exercise 2</h4>
					<textarea name="answer2" id="answer2" rows="4"></textarea>
				</div>
				<div class="form-control">

					<h4>Paste your Code for exercise 3</h4>
					<textarea name="answer3" id="answer3" rows="4"></textarea>
				</div> -->

				<!-- <div class="form-control">
					<input type="checkbox" id="human" name="human" checked>
					<label for="human">I am a not a robot</label>
				</div> -->

				<div class="form-control">
					<div class="g-recaptcha" data-sitekey="6LfYX8QZAAAAACEgNezc1YxR3EceDzcGh04n2BDx"></div>
					<!-- <input class="form-control d-none" data-recaptcha="true" required data-error="Please complete the Captcha">
					<div class="help-block with-errors"></div> -->
				</div>


				<ul class="actions">
					<li><input value="Submit Assignment" type="submit" onClick='submitAssignmentDetails()'></li>
				</ul>
			</form>
			<div id='confirmation' class='modal'>
				<div class='modal-header'>
					<h6> Confirmation</h6>
					<a href="#" onClick='closeModal()'>
						<label for='click' class='fa fa-times'></label>
					</a>
				</div>
				<div class='modal-text'>
					<span> Please select recaptcha</span>
					<div class='div-line'></div>
					<!-- <label for='click' class='close-btn' onClick='closeModal()'>Close window</label> -->
					<ul class="actions">
						<li><input value="close" type="submit" onClick='closeModal()'></li>
					</ul>
				</div>
			</div>
		</div>
	</section>

	<!-- Footer -->
	<footer id="footer">
		<div class="copyright">
			&copy; codePannu. Design: <a href="http://templated.co/">TEMPLATED</a>.
		</div>
	</footer>

	<!-- Scripts -->
	<script src="assets/js/jquery.min.js"></script>
	<script src="assets/js/skel.min.js"></script>
	<script src="assets/js/util.js"></script>
	<script src='https://www.google.com/recaptcha/api.js'></script>
	<!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]-->
	<script src="assets/js/main.js"></script>
	<script language="javascript" type="text/javascript">
		function submitAssignmentDetails() {
			console.log('function evoked')

			//hang on event of form with id=myform
			$("#assignment-details").submit(function (e) {
				this.disabled = true
				//prevent Default functionality
				e.preventDefault();


				const captcha = document.querySelector('#g-recaptcha-response').value
				const name = document.getElementById('name').value
				const email = document.getElementById('email').value
				const level = document.getElementById('level').value
				const day = document.getElementById('day').value
				const answer1 = document.getElementById('answer1').value
				// const assignment=$("#assignment-details").serialize()

				fetch('/subscribe', {
					method: 'POST',
					headers: {
						'Accept': 'application/json, text/plain, */*',
						'Content-type': 'application/JSON'
					},
					body: JSON.stringify({ name: name, email: email, level: level, day: day, answer1: answer1, captcha: captcha })
				})
					.then((res) => res.json())
					.then((data) => {
						console.log(data);
						var isCaptchaValidated = data.sucess;
						console.log(isCaptchaValidated);
						if (isCaptchaValidated == true) {
							var remote = $.ajax({
								url: '/assignments',
								type: 'post',
								async: false,
								dataType: 'application/json',
								data: $("#assignment-details").serialize()
							}).responseText;
							console.log(remote)
							if (remote == 'OK') {
								alert('Thank you for submitting assignment')
								// $(#confirmation).show();
								// $("#confirmation").css("display", "block");
							}
							else {
								alert('unable to submit assignment')
								// $("#confirmation").css("display", "block");
								// window.location.reload();
							}

						}
						else{
							$("#confirmation").css("display", "block");
						}
					})





				//do your own request an handle the results
				// $.ajax({
				// 	url: '/assignments',
				// 	type: 'post',
				// 	dataType: 'application/json',
				// 	data: $("#assignment-details").serialize(),
				// 	success: function (data) {
				// 		console.log(data)
				// 	}
				// });
				// alert('You assignment has been submitted successfully');
				// document.getElementById('name').value = ''
				// document.getElementById('email').value = ''
				// document.getElementById('level').value = ''
				// document.getElementById('day').value = ''
				// document.getElementById('answer1').value = ''
				// document.getElementById('answer2').value = ''
				// document.getElementById('answer3').value = ''
			});
		}

		function closeModal() {
			$("#confirmation").css("display", "none");
			window.location.reload();
			// })
		}
	</script>


</body>

</html>